<div class="container anim-slide-below" ng-init="getModels()">
    
    <div class="page-header">
        <h2>Search Models <small>Total Models {{ totalModels }}</small></h2>
    </div>

    <div class="row row-separate">
        <div class="col-sm-6">
            <form name="searchModelsForm" ng-submit="getModels()">
                <div class="input-group">
                    <span class="input-group-addon glyphicon glyphicon-tags"></span>
                    <tags-input ng-model="tags" add-on-paste="true" placeholder="add tag to filter ..." add-from-autocomplete-only="true" class="form-control" key-property="id" display-property="text" ng-disabled="!totalModels">
                        <auto-complete source="loadTags($query)"></auto-complete>
                    </tags-input>
                    <span class="input-group-btn">
                        <button type="submit" class="btn btn-raised btn-primary" ng-disabled="!totalModels"><span class="glyphicon glyphicon-search"></span></button>
                    </span>
                </div>
            </form>
        </div>
    </div>
    
    
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th width="50%">Name</th>
                    <th>Create at</th>
                    <th>Size</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr class="info" ng-if="!models.length">
                    <td class='text-center' colspan='6'>No models found</td>
                </tr>
                <tr ng-repeat="model in models">
                    <td><strong>{{ model.name }}</strong></td>
                    <td>{{model.createAt | date:'dd-MMM-yy HH:mm'}}</td>
                    <td nowrap>{{ model.size/1024/1024|number:2}} MB</td>
                    <td class="text-center" nowrap>
                        <a ng-href="/public/uploads/{{ model.filename }}" download class="btn btn-raised btn-primary btn-xs">
                             <span class="glyphicon glyphicon-download"></span> Download
                        </a>
                        <button type="button" class="btn btn-raised btn-info btn-xs" uib-popover-template="'tags-input.html'" popover-title="Tags for {{model.name}}">
                            <span class="glyphicon glyphicon-tags"></span> Tags ({{model.tags.length}})
                        </button>
                        <button type="button" class="btn btn-raised btn-danger btn-xs" ng-click="deleteModel(model.id)">
                            <span class="glyphicon glyphicon-trash"></span> Remove
                        </button>
                    </td>
                 
                </tr>
            </tbody>
        </table>
    </div>
    <div class="row">
        <div class="col-sm-6">
             <uib-pagination total-items="models.length" ng-model="currentPage" ng-change="getModels()" max-size="maxSize" boundary-link-numbers="true"></uib-pagination>
        </div>
        <div class="col-sm-6">
            <div class="btn-group btn-group-justified btn-group-raised" >
                <a href="javascript:void(0)" ng-class="['btn', 'btn-primary', {active : orderBy == 'desc'}]" ng-click="changeOrder('desc')" ng-disabled="models.length < 2">Recent Files</a>
                <a href="javascript:void(0)" ng-class="['btn', 'btn-primary', {active : orderBy == 'asc'}]" ng-click="changeOrder('asc')" ng-disabled="models.length < 2">Old Files</a>
            </div>
        </div>
    </div>

     <!-- ng templates -->

    
    <script type="text/ng-template" id="tags-input.html">
        <div ng-controller="tagsCtrl">
            <tags-input ng-model="model.tags">
                <auto-complete source="loadTags($query)"></auto-complete>
            </tags-input>
            <div class="text-center">
               <button type="button" class="btn btn-raised btn-success btn-xs" ng-disabled="!hasTags(model.id) || !hasNotSyncTags(model.id)"  ng-click="saveTags(model.id)">
                  <span class="glyphicon glyphicon-ok"></span>
               </button>
               <button type="button" class="btn btn-raised btn-danger btn-xs" ng-disabled="!hasTags(model.id)" ng-click="dropTags(model.id)">
                  <span class="glyphicon glyphicon-remove"></span>
               </button>
            </div>
         </div>
    </script>
    
    

   
    
    
    
</div>
